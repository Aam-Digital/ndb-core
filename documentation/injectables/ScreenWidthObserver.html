<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ndb-core documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">ndb-core documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">












<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >ScreenWidthObserver</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/utils/media/screen-size-observer.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>This can be used to check the current screen size programmatically
and get notified when it changes. Use the <a href="shared">shared</a> observable to
get notified on any changes. This observable is shared across all instances and
will persist throughout the lifespan of the app.</p>
<p>The <code>platform</code> observable emits changes whenever the screen size changes to
where the app is considered to be in Mobile mode vs. desktop mode.</p>
<p>This class can also be used statically to check the current screen size and/or check whether
the app is currently considered to be in mobile mode or desktop mode.</p>

            </p>



            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#currentScreenSize" >currentScreenSize</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#isDesktop" >isDesktop</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#platform" >platform</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#shared" >shared</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor()</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="131" class="link-to-prism">src/app/utils/media/screen-size-observer.service.ts:131</a></div>
                            </td>
                        </tr>

            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="currentScreenSize"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>currentScreenSize</b></span>
                        <a href="#currentScreenSize"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>currentScreenSize()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="155"
                                    class="link-to-prism">src/app/utils/media/screen-size-observer.service.ts:155</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Return the current screen size as determined by the media queries</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../miscellaneous/enumerations.html#ScreenSize" target="_self" >ScreenSize</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isDesktop"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>isDesktop</b></span>
                        <a href="#isDesktop"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isDesktop()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="168"
                                    class="link-to-prism">src/app/utils/media/screen-size-observer.service.ts:168</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>returns whether the app is currently considered to be in desktop mode
looking only at the screen size.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#IsDesktop" target="_self" >IsDesktop</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="platform"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>platform</b></span>
                        <a href="#platform"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>platform()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="129"
                                    class="link-to-prism">src/app/utils/media/screen-size-observer.service.ts:129</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>An observable that emits whenever the screen size changes so that the app is considered
to be on a mobile device or a desktop device.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#IsDesktop" target="_self" >Observable&lt;IsDesktop&gt;</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="shared"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>shared</b></span>
                        <a href="#shared"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>shared()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="119"
                                    class="link-to-prism">src/app/utils/media/screen-size-observer.service.ts:119</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>The observable shared amongst all instances.
Subscribers to this observable get notified whenever the current screen size changes.</p>
<p>When getting a new observable (or, in other words, when calling this function), the current
screen size is injected so that when you subscribe the first element that arrives is the current screen size.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../miscellaneous/enumerations.html#ScreenSize" target="_self" >Observable&lt;ScreenSize&gt;</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { combineLatest, fromEvent, Observable } from &quot;rxjs&quot;;
import { Injectable, inject } from &quot;@angular/core&quot;;
import { distinctUntilChanged, map, startWith } from &quot;rxjs/operators&quot;;
import { WINDOW_TOKEN } from &quot;../di-tokens&quot;;

/*
 * Constants describing the threshold values.
 * These constants are considered the lower limit, i.e. if
 * a screen is more than 576px large but less than 768px
 * the screen is considered SM.
 *
 * Any screen smaller than &#x60;SM&#x60; is considered &#x60;XS&#x60;
 */
const SM &#x3D; &quot;576px&quot;;
const MD &#x3D; &quot;768px&quot;;
const LG &#x3D; &quot;992px&quot;;
const XL &#x3D; &quot;1200px&quot;;
const XXL &#x3D; &quot;1400px&quot;;

/**
 * Different ranges of screen sizes.
 */

/* Implementation note: This is implemented as an enum (as opposed to a string-type)
 * so that
 * &#x60;&#x60;&#x60;
 * sizeA: ScreenSize &#x3D; ...
 * sizeB: ScreenSize &#x3D; ...
 *
 * aIsGreaterThanB: boolean &#x3D; sizeA &gt; sizeB
 * &#x60;&#x60;&#x60;
 * makes sense.
 */
export enum ScreenSize {
  // extra small (0px &lt;&#x3D; width &lt; 576px)
  xs &#x3D; 0,
  // medium small (576px &lt;&#x3D; width &lt; 768px)
  sm &#x3D; 1,
  // medium (768px &lt;&#x3D; width &lt; 992px)
  md &#x3D; 2,
  // large (992px &lt;&#x3D; width &lt; 1200px)
  lg &#x3D; 3,
  // extra large (1200px &lt;&#x3D; width &lt; 1400px)
  xl &#x3D; 4,
  // extra-extra large (1400 &lt;&#x3D; width)
  xxl &#x3D; 5,
}

/**
 * The screen size where anything smaller and this size itself is considered mobile while anything strictly larger
 * is considered desktop.
 *
 */
export const MOBILE_THRESHOLD: ScreenSize &#x3D; ScreenSize.sm;

/**
 * A type that is used to document the return type of the &#x60;platform&#x60; observable.
 * A variable that has this type shall only have two values that are encoded in
 * a boolean way:
 *
 * - &#x60;true&#x60;: the variable represents that the width of something is considered &#x27;desktop width&#x27;
 * - &#x60;false&#x60;: the variable represents that the width of something is considered &#x27;mobile width&#x27;
 */
export type IsDesktop &#x3D; boolean;

/**
 * This can be used to check the current screen size programmatically
 * and get notified when it changes. Use the {@link shared} observable to
 * get notified on any changes. This observable is shared across all instances and
 * will persist throughout the lifespan of the app.
 *
 * The &#x60;platform&#x60; observable emits changes whenever the screen size changes to
 * where the app is considered to be in Mobile mode vs. desktop mode.
 *
 * This class can also be used statically to check the current screen size and/or check whether
 * the app is currently considered to be in mobile mode or desktop mode.
 */
@Injectable({
  providedIn: &quot;root&quot;,
})
export class ScreenWidthObserver {
  private window &#x3D; inject&lt;Window&gt;(WINDOW_TOKEN);

  /**
   * create an observable that emits whenever the &#x60;query&#x60; matches.
   * Also emits the current state to begin with.
   * @param query The query to check
   * @private
   */
  private static matching(
    query: MediaQueryList,
  ): Observable&lt;MediaQueryListEvent&gt; {
    return fromEvent&lt;MediaQueryListEvent&gt;(query, &quot;change&quot;).pipe(
      startWith({
        matches: query.matches,
        media: query.media,
      } as MediaQueryListEvent),
    );
  }

  /**
   * The internal query lists that are used to check the current screen sizes
   * @private
   */
  private queryLists: MediaQueryList[] &#x3D; [SM, MD, LG, XL, XXL].map((size) &#x3D;&gt;
    // matches when the screen&#x27;s width is greater than &#x60;size&#x60;
    this.window.matchMedia(&#x60;screen and (min-width: ${size})&#x60;),
  );

  private readonly _shared: Observable&lt;ScreenSize&gt;;

  /**
   * The observable shared amongst all instances.
   * Subscribers to this observable get notified whenever the current screen size changes.
   *
   * When getting a new observable (or, in other words, when calling this function), the current
   * screen size is injected so that when you subscribe the first element that arrives is the current screen size.
   */
  public shared(): Observable&lt;ScreenSize&gt; {
    return this._shared.pipe(startWith(this.currentScreenSize()));
  }

  private readonly _platform: Observable&lt;IsDesktop&gt;;

  /**
   * An observable that emits whenever the screen size changes so that the app is considered
   * to be on a mobile device or a desktop device.
   */
  public platform(): Observable&lt;IsDesktop&gt; {
    return this._platform.pipe(startWith(this.isDesktop()));
  }

  constructor() {
    this._shared &#x3D; combineLatest(
      this.queryLists.map((queryList) &#x3D;&gt;
        ScreenWidthObserver.matching(queryList),
      ),
    ).pipe(
      map(() &#x3D;&gt; {
        // Listening to the events requires parsing (or understanding) the event and the
        // attached media-string which requires more logic than simply computing the result in-place.
        return this.currentScreenSize();
      }),
    );

    this._platform &#x3D; this._shared.pipe(
      map((screenSize) &#x3D;&gt; screenSize &gt; MOBILE_THRESHOLD),
      distinctUntilChanged(),
    );
  }

  /**
   * Return the current screen size as determined by the media queries
   */
  public currentScreenSize(): ScreenSize {
    // when this returns -1 then no query is active. This means
    // that the screen size is less than &#x60;SM&#x60;, i.e. &#x60;XS&#x60;
    return (
      this.queryLists.map((queryList) &#x3D;&gt; queryList.matches).lastIndexOf(true) +
      1
    );
  }

  /**
   * returns whether the app is currently considered to be in desktop mode
   * looking only at the screen size.
   */
  public isDesktop(): IsDesktop {
    return this.currentScreenSize() &gt; MOBILE_THRESHOLD;
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'ScreenWidthObserver.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
