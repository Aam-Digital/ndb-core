<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ndb-core documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../../images/favicon.ico">
	   <link rel="stylesheet" href="../../styles/style.css">
        <link rel="stylesheet" href="../../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../../" class="navbar-brand">ndb-core documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content additional-page">
                   <div class="content-data">

























<h1>How to build components that can be localized</h1>
<h2>Short Answer</h2>
<ol>
<li><p>In your html-components, mark any text that should be translated
using the <code>i18n</code> directive:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-html">&lt;button i18n-title=&quot;&lt;meaning&gt;|&lt;description&gt;&quot; title=&quot;I am a button&quot; i18n=&quot;&lt;meaning&gt;|&lt;description&gt;&quot;&gt;Click me!&lt;/button&gt;</code></pre></div></li>
<li><p>In your other components, mark strings that may be translated
using the <code>localize</code> function:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-typescript">const notification = $localize`I have eaten all ${number} Muffins`;</code></pre></div></li>
</ol>
<h2>Elaborate Answer</h2>
<h3>The i18n-directive</h3>
<p>The <code>i18n</code> directive allows up to three optional arguments. The first two -
meaning and description - are used to aid translators while analyzing the
texts. The third one is an optional ID. This ID is generated by angular and
does not have to be provided.</p>
<p>If different components have the same content and the same meaning, they will
be merged automatically, it is therefore not required (and will, in fact,
generate a warning) to assign a custom id to components that should be
translated in the same way. To enable this behavior, the same content and
meaning should be provided.</p>
<p>The meaning of a text message is important so that translators can understand
what the text should represent, even without having to see the actual website.
Take this example:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-html">&lt;span i18n&gt;Address of {{user}}: {{user.address}}&lt;/span&gt;</code></pre></div><p>Without further knowledge, what does address refer to? The physical address
of the user, or his internet-address?
It is therefore always good practice including a meaning and further description
like so:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-html">&lt;span i18n=&quot;Address field|The address that a user lives at&quot;&gt; Address of {{user}} &lt;/span&gt;</code></pre></div><p>The <code>i18n</code> directive can also be used to translate tooltips, titles and other
attributes of the element. This is done by writing <code>i18n-title</code>,
<code>i18n-matTooltip</code>, e.t.c. The rules are the same as for the regular directive.</p>
<h3>The localize-function</h3>
<p>While html-elements can be marked for translation using the <code>i18n</code> directive,
the same is not true for strings in non-html components. To enable localization
here, the function <code>$localize()</code> is used. It is comparable to the directive,
however some small changes have to be taken into account:</p>
<ol>
<li>Meaning and description of the string to translate are in front of the actual
string and are marked using two colons (<code>:</code>).</li>
<li>The translate-function is special in that it conceptually does not have
parameters. Instead, the string is directly written after the identifier</li>
</ol>
<p>Example:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-typescript">alertService.warn($localize`:Illegal input warning:Please provide the correct input for ${field}`);</code></pre></div><p>Variables inside the string can be of arbitrary complexity and are escaped using the
<code>${}</code> syntax.</p>
<h3>Generate translation files</h3>
<p><em>This is just a quick overiew.For more information, refer to the
<a href="add-another-language.md">How to add another language</a> guide
and the <a href="work-with-xlf.md">How to edit, update and work with XLF files</a> guide</em>.</p>
<p>Once content with the process of marking fields as translatable and providing
good and understandable meaning to these fields, translation-files can be
generated. This is done using the <code>extract-i18n</code>-script (Can be found in the
file <a href="package.json">package.json</a>). This script will generate one
&quot;Base file&quot; and will also generate and update existing translation files
for all locales given in the script. These will be located in the
<a href="../../../src/locale">locale</a> directory.
XLF files are standardized and can be read using standard tools such as
the <a href="https://xliff.brightec.co.uk">Online XLIFF Editor</a></p>
<p>The translation files are in xml-format. After some preambles, there are
characteristic blocks that follow all the same schema; blocks like this:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-xml">&lt;trans-unit id=&quot;947fb7a14ab3d88dbe2ab508622f33bfcae44ad5&quot; datatype=&quot;html&quot;&gt;
  &lt;source&gt; Change Password &lt;/source&gt;
  &lt;context-group purpose=&quot;location&quot;&gt;
    &lt;context context-type=&quot;sourcefile&quot;&gt;src/app/core/user/user-account/user-account.component.html&lt;/context&gt;
    &lt;context context-type=&quot;linenumber&quot;&gt;126,127&lt;/context&gt;
  &lt;/context-group&gt;
  &lt;note priority=&quot;1&quot; from=&quot;description&quot;&gt;Change password button&lt;/note&gt;
&lt;/trans-unit&gt;</code></pre></div><p>The <code>&lt;source&gt;</code> section is this the original string that we defined in code or html.
If you are not in the <code>messages.xlf</code> file but in any other <code>messages.&lt;locale&gt;.xlf</code> file,
you can provide translations. for the locale. For a list of common and standardized locales,
see the <a href="https://www.loc.gov/standards/iso639-2/">ISO-639-2</a> standard.</p>
<p>To provide a translation, add the <code>&lt;target&gt;</code> tag inside the <code>&lt;trans-unit&gt;</code>
tag (assuming we are inside <code>messages.de.xlf</code> and therefore looking for a
german translation):</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-xml">&lt;trans-unit id=&quot;947fb7a14ab3d88dbe2ab508622f33bfcae44ad5&quot; datatype=&quot;html&quot;&gt;
  &lt;source&gt; Change Password &lt;/source&gt;
  &lt;target&gt; Passwort Ã¤ndern &lt;/target&gt;
  &lt;context-group purpose=&quot;location&quot;&gt;
    &lt;context context-type=&quot;sourcefile&quot;&gt;src/app/core/user/user-account/user-account.component.html&lt;/context&gt;
    &lt;context context-type=&quot;linenumber&quot;&gt;126,127&lt;/context&gt;
  &lt;/context-group&gt;
  &lt;note priority=&quot;1&quot; from=&quot;description&quot;&gt;Change password button&lt;/note&gt;
&lt;/trans-unit&gt;</code></pre></div><p>If all source tags are processed, the translation-process is done!</p>
<h3>The building process</h3>
<p>To build the app for a specific locale, enter that locale inside
<a href="../../../angular.json">angular.json</a> at</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-json">{
  ...
  &quot;options&quot;: {
    &quot;localize&quot;: [&quot;&lt;your locale&gt;&quot;]
  }
}</code></pre></div><p>For the German version for example, just add</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-json">{
  &quot;localize&quot;: [&quot;de&quot;]
}</code></pre></div><p>at the end of &quot;projects&quot; --&gt; &quot;ndb-core&quot; --&gt; &quot;architect&quot; --&gt; &quot;build&quot; before the &quot;configuration&quot;-section starts.</p>
<p>Since the build process is fairly complex, only one locale is allowed during
development. The locale must be inside the locale-folder and be of type
<code>messages.&lt;your locale&gt;.xlf</code></p>
<p>Angular will not translate the components on the fly. Instead, it will
generate a separate app for each and every component provided in the
<code>localize</code> array.</p>
<h3>Other types of localization</h3>
<p>Texts are not the only thing characterizing an international app. Other data
has a different expression in different cultures. To enable this, several pipes
can be used to transform that data automatically. For example:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-angular2html">&lt;span&gt;It&#39;s a nice day {{today | date}}&lt;/span&gt;</code></pre></div><p>Will transform the date to different locales.
Pre-built pipes are</p>
<ul>
<li><code>DatePipe</code>: Formats a date</li>
<li><code>CurrencyPipe</code>: Transforms a number to a currency string</li>
<li><code>DecimalPipe</code>: Transforms a number into a decimal string with given accuracy</li>
<li><code>PercentPipe</code>: Transforms a number to a percent-string</li>
</ul>
<h3>ICU-Components</h3>
<p>ICU is another standard that Angular uses to localize strings. There
are two ICU-standards of interest: Pluralization and Selection</p>
<h4>Pluralization</h4>
<p>Some phrases contain plurals, such as</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-angular2html">&lt;span&gt;The game starts in {{minutesTillStart}} minutes&lt;/span&gt;</code></pre></div><p>This can produce the incorrect result of &quot;The game starts in 1 minutes&quot;. To
improve this, one should use plural forms. These have the following syntax:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-angular2html">{ amount, plural, =0 {none} =1 {one} other {other cases} }</code></pre></div><p><strong>amount</strong> is the selector - how much actually exists. Following this,
the <strong>plural</strong> selector follows, indicating that this is a pluralized form.
Finally, the different values that one can pluralize are described. Legal
values are</p>
<ul>
<li><code>=x</code> matches, when the amount is exactly that value</li>
<li><code>one</code></li>
<li><code>two</code></li>
<li><code>few</code></li>
<li><code>many</code></li>
<li><code>others</code></li>
</ul>
<p><code>others</code> matches all amounts that cannot be matched by anything else. So the
text above could be pluralized like this:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-angular2html">&lt;span&gt;The game starts { minutesTillStart, plural,
  =0 {right now}
  one {in one minute}
  others {in {{minutesTillStart}} minutes} }
&lt;/span&gt;</code></pre></div><h4>Selection</h4>
<p>Selection selects one option of a set of selections. A suitable example
for this is the gender of a person:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-html">This is {{person}}. {gender, select, male {He} female {She}} is a nice person.</code></pre></div><p>Can be translated to the variants &quot;This is Tom. He is a nice person&quot; as well as
&quot;This is Nancy. She is a nice person&quot;. The syntax is:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-html">{variable, select optionA {value_optionA} optionB {value_optionB} ...}</code></pre></div><p>The variable&#39;s type is arbitrary, however the options have to make sense.
Types that are known to work well are the standard types of strings, numbers
and booleans.</p>
<h3>Do&#39;s and dont&#39;s</h3>
<ul>
<li><p>Try to keep your translatable texts as simple as possible concerning the
amount of string-interpolation or computation inside the <code>{{}}</code>-Blocks. This
makes it easier for translators</p>
</li>
<li><p>It may be tempting sometimes to do a &#39;string-in string&#39; interpolation like so:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-angular2html">&lt;div&gt;
My cat likes milk {{catLikesCheese ? &quot;and cheese&quot; : &quot;&quot;}}
&lt;/div&gt;</code></pre></div><p>This <strong>must</strong> not be done. It is hard for translators to understand what&#39;s
going on inside the interpolation, and the translated text might not
be accepted by Angular&#39;s localize-package. Instead, you could use a
custom getter:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-typescript">get catYumYum(): string {
  return $localize`My cat likes milk${andMore}`;
}
get andMore(): string {
  return catLikesCheese ? &quot; &quot; + $localize`and cheese` : &quot;&quot;;
}</code></pre></div><b>Example :</b><div><pre class="line-numbers"><code class="language-angular2html">&lt;div&gt;{{catYumYum}}&lt;/div&gt;</code></pre></div><p>where both parts can be localized individually. It is important
to provide a good description here.</p>
<p>Another possibility is to use the ICU selection syntax:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-angular2html">&lt;div&gt;
My cat likes milk { catLikesCheese, select, true {And Cheese} false {} }
&lt;/div&gt;</code></pre></div></li>
<li><p>Using the <code>$localize</code> function, the placeholders can accept id&#39;s that
might simplify the translation process:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-typescript">$localize`Hello, ${v123}:HELLO_VAR:`;</code></pre></div><p>In this example, <code>HELLO_VAR</code> is the id for the variable-substitution
<code>v123</code>. A descriptive id might aid in the translation process.</p>
<p>This is not possible using the <code>i18n</code> tag. In this case, the id
will implicitly be <code>INTERPOLATION</code> and cannot be changed</p>
</li>
</ul>

                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 2;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'additional-page';
            var COMPODOC_CURRENT_PAGE_URL = 'build-localizable-(translatable)-ui.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../../js/libs/custom-elements.min.js"></script>
       <script src="../../js/libs/lit-html.js"></script>

       <script src="../../js/menu-wc.js" defer></script>
       <script nomodule src="../../js/menu-wc_es5.js" defer></script>

       <script src="../../js/libs/bootstrap-native.js"></script>

       <script src="../../js/libs/es6-shim.min.js"></script>
       <script src="../../js/libs/EventDispatcher.js"></script>
       <script src="../../js/libs/promise.min.js"></script>

       <script src="../../js/compodoc.js"></script>

       <script src="../../js/tabs.js"></script>
       <script src="../../js/menu.js"></script>
       <script src="../../js/libs/clipboard.min.js"></script>
       <script src="../../js/libs/prism.js"></script>
       <script src="../../js/sourceCode.js"></script>
          <script src="../../js/search/search.js"></script>
          <script src="../../js/search/lunr.min.js"></script>
          <script src="../../js/search/search-lunr.js"></script>
          <script src="../../js/search/search_index.js"></script>
       <script src="../../js/lazy-load-graphs.js"></script>


    </body>
</html>
