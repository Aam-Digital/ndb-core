<div class="user-details-form">
  <form [formGroup]="form">
    <mat-form-field class="full-width">
      <mat-label i18n="label of email input">Email</mat-label>
      <input matInput type="text" formControlName="email" />
      @if (getFormError("email", "email")) {
        <mat-error i18n> Please enter a valid email </mat-error>
      }
      @if (getFormError("email", "required")) {
        <mat-error i18n> This field is required </mat-error>
      }
    </mat-form-field>

    <mat-form-field class="full-width">
      <mat-label i18n="label of roles input">Roles</mat-label>
      <mat-select formControlName="roles" multiple>
        <mat-select-trigger>
          @for (role of form.get("roles")?.value; track role) {
            <span>{{ role.name }} </span>
          }
        </mat-select-trigger>
        @for (role of availableRoles(); track role) {
          <mat-option [value]="role" [matTooltip]="role.description">
            {{ role.description }}
            <em class="role-name">{{ role.name }}</em>
          </mat-option>
        }
      </mat-select>
      <mat-hint i18n="hint about assigning user roles" class="field-hint">
        You should select at least one user role. Otherwise this user will notx
        even be able to access the basic app layout like the menu.
      </mat-hint>
      @if (getFormError("roles", "required")) {
        <mat-error i18n> This field is required </mat-error>
      }
    </mat-form-field>


    @if (showPasswordChange()) {
      <div class="field-row">
        <button
          mat-stroked-button
          type="button"
          color="primary"
          i18n="button to change password"
        >
          Change Password
        </button>
      </div>
    }

    @if (getGlobalError()) {
      <mat-error class="global-error">{{ getGlobalError() }}</mat-error>
    }
  </form>
</div>
