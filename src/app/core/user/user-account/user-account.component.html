<!--
  ~     This file is part of ndb-core.
  ~
  ~     ndb-core is free software: you can redistribute it and/or modify
  ~     it under the terms of the GNU General Public License as published by
  ~     the Free Software Foundation, either version 3 of the License, or
  ~     (at your option) any later version.
  ~
  ~     ndb-core is distributed in the hope that it will be useful,
  ~     but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~     GNU General Public License for more details.
  ~
  ~     You should have received a copy of the GNU General Public License
  ~     along with ndb-core.  If not, see <http://www.gnu.org/licenses/>.
  -->

<mat-tab-group>

  <mat-tab label="User Account">
    <ng-template matTabContent>
      <div class='user-profile-tab'>
        <p>
          <mat-form-field>
            <input placeholder="Username" matInput="text" id="username" type="text" [value]="user.name" disabled>
          </mat-form-field>
        </p>
        <form [formGroup]="passwordForm">
          <mat-form-field>
            <label>
              Current Password
              <input matInput type="password" formControlName="currentPassword">
            </label>
            <mat-error *ngIf="!passwordForm.get('currentPassword').valid && passwordForm.get('currentPassword').touched">
              Current password needs to be provided
            </mat-error>
          </mat-form-field>
          <form formGroupName="newPassword">
            <p>The new Password should have at least 8 characters, one capital letter and one symbol or number</p>

            <mat-form-field>
              <label>
                New password
                <input matInput type="password" formControlName="newPassword">
              </label>
              <mat-error *ngIf="passwordForm.get('newPassword').get('newPassword').invalid && passwordForm.get('newPassword').get('newPassword').touched">
                Password format incorrect
              </mat-error>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                Confirm Password
                <input matInput type="password" formControlName="confirmPassword">
              </label>
            </mat-form-field>
            <mat-error *ngIf="passwordForm.get('newPassword').invalid && passwordForm.get('newPassword').get('confirmPassword').touched">
              Passwords do not match
            </mat-error>
          </form>
          <mat-error *ngIf="passwordErrorMessage">{{passwordErrorMessage}}</mat-error>
          <button mat-raised-button type="submit" [disabled]="passwordForm.invalid">Change Password</button>
        </form>
      </div>
    </ng-template>
  </mat-tab>


  <mat-tab label="Image Service" *ngIf='webdavEnabled'>
    <ng-template matTabContent>
      <div class='user-profile-tab'>
        <app-cloud-file-service-user-settings [user]='user'></app-cloud-file-service-user-settings>
      </div>
    </ng-template>
  </mat-tab>

</mat-tab-group>
