<h1 i18n>Technical User Support Details</h1>

<p id="table-description" class="text-secondary" i18n>
  The following details of your device and app can help the user support
  troubleshoot when you are having technical issues.
</p>

<table class="support-table" aria-describedby="table-description">
  <thead>
    <tr>
      <th>Detail</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody class="support-table--body">
    <tr>
      <td>Session</td>
      <td>{{ sessionInfo?.name ?? "-" }}</td>
    </tr>
    <tr>
      <td>Username</td>
      <td>{{ currentUser?.toString() ?? "-" }}</td>
    </tr>
    <tr>
      <td>App version</td>
      <td>{{ appVersion }}</td>
    </tr>
    <tr>
      <td>Device info</td>
      <td>{{ userAgent }}</td>
    </tr>
    <tr>
      <td>Current sync state</td>
      <td>{{ currentSyncState }}</td>
    </tr>
    <tr>
      <td>Last sync</td>
      <td>{{ lastSync }}</td>
    </tr>
    <tr>
      <td>Last remote login</td>
      <td>{{ lastRemoteLogin }}</td>
    </tr>
    <tr>
      <td>Storage usage</td>
      <td>{{ storageInfo || "No information" }}</td>
    </tr>
    <tr>
      <td>Database documents</td>
      <td>{{ dbInfo }}</td>
    </tr>
    <tr>
      <td>Service Worker</td>
      <td>{{ swStatus }}</td>
    </tr>
  </tbody>
</table>

<mat-expansion-panel class="mat-elevation-z0">
  <mat-expansion-panel-header>
    <mat-panel-title class="tech-details">
      Service Worker Logs
    </mat-panel-title>
  </mat-expansion-panel-header>
  <div class="sw-logs tech-details">{{ swLog }}</div>
</mat-expansion-panel>

<div class="flex-row gap-regular">
  <button mat-raised-button (click)="sendReport()" i18n>Send Details</button>
  <button
    mat-raised-button
    matTooltip="Download a backup of all data in your local database."
    i18n-matTooltip="Support Panel - Download local db tooltip"
    (click)="downloadLocalDatabase()"
    i18n
  >
    Download Local Database
  </button>
  <button mat-raised-button color="warn" (click)="resetApplication()" i18n>
    Reset Application
  </button>
</div>
