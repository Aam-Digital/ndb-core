<mat-form-field [formGroup]="form" floatLabel="always">
  <mat-label i18n>Default Value</mat-label>

  <div class="flex-row gap-regular align-center">
    <div class="flex-grow">
      @switch (this.form.get("mode")?.value) {
        @default {
          <app-admin-default-value-static
            formControlName="config"
          ></app-admin-default-value-static>
        }
        @case ("dynamic") {
          <app-admin-default-value-dynamic
            formControlName="config"
          ></app-admin-default-value-dynamic>
        }
        @case ("inherited-from-referenced-entity") {
          <app-admin-default-value-inherited
            formControlName="config"
            [entityType]="entityType"
          ></app-admin-default-value-inherited>
        }
      }
    </div>

    <mat-button-toggle-group
      formControlName="mode"
      aria-label="default value mode"
      hideSingleSelectionIndicator
      style="flex: none"
    >
      <mat-button-toggle
        value="static"
        matTooltip="simple, fixed default value"
        i18n-matTooltip
      >
        <fa-icon icon="circle"></fa-icon>
      </mat-button-toggle>

      <mat-button-toggle
        value="dynamic"
        matTooltip="dynamic placeholder (e.g. current date or user)"
        i18n-matTooltip
      >
        <fa-icon icon="circle-left"></fa-icon>
      </mat-button-toggle>

      <mat-button-toggle
        value="inherited-from-referenced-entity"
        matTooltip="value inherited from the value of another, linked record (requires another field in this record type to be a link to a record)"
        i18n-matTooltip
      >
        <fa-icon icon="circle-nodes"></fa-icon>
      </mat-button-toggle>
    </mat-button-toggle-group>

    <button
      mat-icon-button
      matIconSuffix
      matTooltip="Remove default value"
      i18n-matTooltip
      (click)="clearDefaultValue()"
      color="{{ form.invalid ? 'accent' : '' }}"
    >
      <fa-icon icon="times"></fa-icon>
    </button>
  </div>

  @if (form.invalid) {
    <mat-error i18n="error message"
      >Select default value or clear default value mode
    </mat-error>
  }
</mat-form-field>
