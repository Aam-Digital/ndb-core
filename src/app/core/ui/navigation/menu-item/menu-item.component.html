<mat-list-item
  angulartics2On="click"
  angularticsCategory="Navigation"
  angularticsAction="app_navigation_link_click"
  [angularticsLabel]="item.label"
  [routerLink]="!adminMode && item.link ? [item.link] : undefined"
  class="indent-item"
  [class.matched-background]="item.link === activeLink"
  (click)="onListItemClick($event)"
>
  <span class="flex-row gap-small">
    <app-fa-dynamic-icon
      class="nav-icon"
      [icon]="item.icon"
    ></app-fa-dynamic-icon>
    <span class="menu-label">{{ item.label }}</span>
    <fa-icon
      *ngIf="hasSubMenu(item)"
      [icon]="isExpanded ? 'chevron-down' : 'chevron-right'"
    ></fa-icon>
  </span>
</mat-list-item>

<!-- Render submenus if they exist and are expanded -->
<div *ngIf="isExpanded" class="submenu">
  <ng-container *ngFor="let subItem of item.subMenu">
    <app-menu-item
      [item]="subItem"
      [activeLink]="activeLink"
      [adminMode]="adminMode"
      (editRequest)="editRequest.emit()"
    ></app-menu-item>
  </ng-container>
</div>
