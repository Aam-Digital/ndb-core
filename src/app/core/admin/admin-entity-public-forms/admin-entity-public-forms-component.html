<app-hint-box i18n>
  You can share the link to a "Public Form" with people who do not have an
  account or embed it in your website. People can submit new records through
  this form without logging in. For example, you can let participants
  self-register this way and then review their data later.
</app-hint-box>

@if (!hasPublicCreatePermission() && !isCheckingPermissions()) {
  <app-hint-box type="warning" class="margin-bottom-regular">
    <div>
      <strong i18n>⚠️ Missing Public Permission</strong>
      <p i18n>
        Public forms for "{{
          entityConstructor?.label || entityConstructor?.ENTITY_TYPE
        }}" records will not work because public users (visitors without
        accounts) do not have permission to create new
        {{ entityConstructor?.label || entityConstructor?.ENTITY_TYPE }}
        records.
      </p>
      <p>
        <strong i18n>Required:</strong>
        <span i18n
          >The "public" role needs "create" permission for "{{
            entityConstructor?.ENTITY_TYPE
          }}" entities.</span
        >
      </p>
      <div class="flex-row gap-small margin-top-small">
        @if (canAddPermissions()) {
          <button
            mat-raised-button
            color="accent"
            (click)="addPermissionAutomatically()"
            i18n
          >
            Update Permissions
          </button>
        } @else {
          <p class="text-muted" i18n>
            You need admin permissions to add the required permission
            automatically.
          </p>
        }
      </div>
    </div>
  </app-hint-box>
}

<app-view-title [disableBackButton]="true" [displayInPlace]="true" i18n>
  Public Forms
</app-view-title>

<div>
  <app-related-entities
    entityType="PublicFormConfig"
    property="entity"
    [columns]="['title', 'route', 'description']"
    [entity]="dummyEntity"
    clickMode="popup-details"
  ></app-related-entities>
</div>

<div class="padding-regular" i18n>
  You can also create forms for <strong>"related records"</strong> (e.g. a
  survey that links back to the participant's record who has submitted the
  form). For this, create a form for the "related record's type" (e.g. the
  survey entity) and enable the setting to create custom, individualized form
  links there.
</div>
