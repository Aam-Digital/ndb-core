<div class="conditional-color-config">
  @if (!isConditionalMode) {
    <app-color-input
      [color]="getStaticColor()"
      (colorChange)="onStaticColorChange($event)"
    ></app-color-input>
  }

  @if (isConditionalMode) {
    <div class="conditional-section">
      <div class="flex-row gap-regular align-center">
        <mat-form-field class="flex-grow">
          <mat-label i18n>Conditional Color Field</mat-label>
          <mat-select
            [value]="selectedColorField"
            (valueChange)="onColorFieldSelected($event)"
            placeholder="Select field"
            i18n-placeholder
          >
            @for (option of colorFieldOptions; track option.value) {
              <mat-option [value]="option.value">{{ option.label }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <button
          mat-icon-button
          type="button"
          (click)="openColorJsonEditor()"
          [disabled]="!selectedColorField"
          matTooltip="Edit conditional colors in JSON editor"
          i18n-matTooltip
        >
          <fa-icon icon="code"></fa-icon>
        </button>
      </div>
    </div>
  }
</div>
