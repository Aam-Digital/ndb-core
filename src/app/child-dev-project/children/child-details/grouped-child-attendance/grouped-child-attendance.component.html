<div *ngIf="loading">
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</div>

<mat-tab-group appTabStateMemo class="activity-tab-group">
  <mat-tab *ngFor="let activity of activities" [label]="activity.title">
    <app-activity-attendance-section
      [entity]="activity"
      [forChild]="entity.getId()"
    >
    </app-activity-attendance-section>
  </mat-tab>

  <mat-tab *ngIf="archivedActivities.length > 0" label="Previous Activities">
    <p i18n>
      This section displays historical activities in which the student was
      previously enrolled.
    </p>

    <mat-form-field>
      <mat-label>Select a Previous Activity</mat-label>
      <mat-select (selectionChange)="onActivityChange($event.value)">
        <mat-option
          *ngFor="let archivedActivity of archivedActivities"
          [value]="archivedActivity"
        >
          {{ archivedActivity.title }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div *ngIf="selectedActivity">
      <div *ngFor="let selectedArchivedActivity of selectedArchivedActivities">
        <app-activity-attendance-section
          [entity]="selectedArchivedActivity"
          [forChild]="entity.getId()"
        >
        </app-activity-attendance-section>
      </div>
    </div>
  </mat-tab>
</mat-tab-group>
