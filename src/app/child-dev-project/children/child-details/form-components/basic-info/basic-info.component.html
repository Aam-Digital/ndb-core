<form [formGroup]="form">
    <div
        fxLayout="row"
        fxLayout.xs="column wrap"
        fxLayout.md="column wrap"
        fxLayout.sm="column wrap"
    >
        <div fxFlex="160px" class="child-pic-container">
            <img
                    [src]="child?.photo?.value"
                    class="child-pic"
                    alt="child's photo"
            />

            <input
                    style="display: none;"
                    type="file"
                    accept=".jpg, .jpeg, .png"
                    (change)="uploadChildPhoto($event)"
                    #fileUpload
            />
            <button
                    *ngIf="enablePhotoUpload && (creatingNew || editing)"
                    class="child-pic-upload"
                    (click)="fileUpload.click()"
            >
                <mat-icon class="upload-icon" fontIcon="fa-upload"></mat-icon>
            </button>

            <mat-form-field
                    *ngIf="(creatingNew || editing) && isAdminUser"
                    class="child-pic-photofile"
            >
                <input
                    #photoFileInput
                    matTooltip="filename for child photo uploaded by server administrator"
                    matInput
                    formControlName="photoFile"
                    placeholder="Photo filename"
                    title="photoFile"
                    type="text"
                />
                <span
                        matSuffix
                        (click)="photoFileInput.value = ''"
                        class="fa fa-times"
                ></span>
            </mat-form-field>
        </div>

        <div fxFlex>
            <mat-form-field style="width: 300px;">
                <input
                        matInput
                        formControlName="name"
                        placeholder="Name"
                        title="name"
                        type="text"
                />
                <mat-error *ngIf="this.form.get('name').invalid && validateForm">
                    Name is required
                </mat-error>
            </mat-form-field>

            <mat-form-field style="width: 100px;">
                <input
                        matInput
                        formControlName="projectNumber"
                        placeholder="Project Number"
                        type="text"
                />
            </mat-form-field>

            <mat-form-field>
                <input
                        matInput
                        formControlName="center"
                        placeholder="Center"
                        type="text"
                />
                <mat-error *ngIf="this.form.get('center').invalid && validateForm">
                    Center is required
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <input
                        matInput
                        formControlName="status"
                        placeholder="Project Status"
                        type="text"
                />
            </mat-form-field>
        </div>

        <div>
            <mat-form-field style="width: 50px;">
                <input
                        matInput
                        placeholder="Age"
                        type="number"
                        [value]="child.age"
                        [disabled]="true"
                />
            </mat-form-field>
            <mat-form-field style="width: 120px;">
                <input
                        matInput
                        formControlName="dateOfBirth"
                        placeholder="Date of Birth"
                        [matDatepicker]="dateOfBirthDatepicker"
                        [disabled]="!editing"
                />
                <mat-datepicker-toggle
                        matSuffix
                        [for]="dateOfBirthDatepicker"
                ></mat-datepicker-toggle>
                <mat-datepicker #dateOfBirthDatepicker></mat-datepicker>
            </mat-form-field>

            <mat-form-field>
                <mat-label>
                    Gender
                </mat-label>
                <mat-select
                        [disabled]="!editing"
                        [(ngModel)]="child.gender"
                        [ngModelOptions]="{ standalone: true }"
                >
                    <mat-option *ngFor="let g of genders | keys" [value]="g.value">{{
                        g.key
                        }}</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field>
                <input
                        matInput
                        formControlName="motherTongue"
                        placeholder="Mother Tongue"
                        type="text"
                />
            </mat-form-field>

            <mat-form-field>
                <input
                        matInput
                        formControlName="religion"
                        placeholder="Religion"
                        title="Religion"
                        type="text"
                />
            </mat-form-field>
        </div>

        <div>
            <mat-form-field style="width: 180px;">
                <input
                        matInput
                        formControlName="admissionDate"
                        placeholder="Admission Date"
                        [matDatepicker]="admissionDatepicker"
                        [disabled]="!editing"
                />
                <mat-datepicker-toggle
                        matSuffix
                        [for]="admissionDatepicker"
                ></mat-datepicker-toggle>
                <mat-datepicker #admissionDatepicker></mat-datepicker>
            </mat-form-field>

            <mat-form-field>
                <mat-label>
                    Aadhar Status
                </mat-label>
                <mat-select
                        [disabled]="!editing"
                        formControlName="has_aadhar"
                >
                    <mat-option *ngFor="let s of documentStatus" [value]="s">{{
                        s
                        }}</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field>
                <mat-label>
                    Kanyashree Status
                </mat-label>
                <mat-select
                        [disabled]="!editing"
                        formControlName="has_kanyashree"
                >
                    <mat-option *ngFor="let s of documentStatus" [value]="s">{{
                        s
                        }}</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field>
                <mat-label>
                    Bank Account Status
                </mat-label>
                <mat-select
                        [disabled]="!editing"
                        formControlName="has_bankAccount"
                >
                    <mat-option *ngFor="let s of documentStatus" [value]="s">{{
                        s
                        }}</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field>
                <mat-label>
                    Ration Card Status
                </mat-label>
                <mat-select
                        [disabled]="!editing"
                        formControlName="has_rationCard"
                >
                    <mat-option *ngFor="let s of documentStatus" [value]="s">{{
                        s
                        }}</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field>
                <mat-label>
                    BPL Card Status
                </mat-label>
                <mat-select
                        [disabled]="!editing"
                        formControlName="has_BplCard"
                >
                    <mat-option *ngFor="let s of documentStatus" [value]="s">{{
                        s
                        }}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div>
            <mat-form-field style="width: 300px;">
                <input
                        matInput
                        type="text"
                        formControlName="address"
                        placeholder="Address"
                />
            </mat-form-field>

            <mat-form-field>
                <input
                        matInput
                        type="text"
                        formControlName="phone"
                        placeholder="Phone No."
                />
            </mat-form-field>

            <mat-form-field>
                <input
                        matInput
                        type="text"
                        formControlName="guardianName"
                        placeholder="Guardians"
                />
            </mat-form-field>

            <mat-form-field>
                <input
                        matInput
                        type="text"
                        formControlName="preferredTimeForGuardianMeeting"
                        placeholder="Preferred time for guardians meeting"
                />
            </mat-form-field>
        </div>
    </div>
</form>
<div>
    <button
            *ngIf="creatingNew || editing"
            mat-stroked-button
            class="edit-button"
            (click)="save()"
    >
        Save
    </button>

    <button
            *ngIf="creatingNew || editing"
            mat-stroked-button
            class="edit-button"
            (click)="switchEdit()"
    >
        Cancel
    </button>

    <button
            *ngIf="!editing"
            mat-stroked-button
            class="edit-button"
            (click)="switchEdit()"
    >
        Edit
    </button>
</div>
