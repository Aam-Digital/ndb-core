<!-- Individual Student's Page -->
<div *ngIf="children?.length > 0">
  <div class="attendance-progress-bar">
    <mat-progress-bar
      class="filler"
      mode="determinate"
      [value]="(currentIndex / children.length) * 100"
    ></mat-progress-bar>
    <div class="progress-label" [style.visibility]="currentIndex < children.length ? 'visible' : 'hidden'">
      {{ currentIndex+1 }} / {{ children.length }}
    </div>

    <div class="navigation-bar">
      <button mat-icon-button (click)="goToPrevious()" [disabled]="isFirst">
        <fa-icon icon="chevron-left"></fa-icon>
      </button>
      <div *ngIf="isFinished" style="flex-grow: 1"></div>
      <app-child-block
        *ngIf="!isFinished"
        [entity]="currentChild"
        class="child-block">
      </app-child-block>
      <button mat-icon-button (click)="goToNext()" [disabled]="isFinished">
        <fa-icon icon="chevron-right"></fa-icon>
      </button>
    </div>

  </div>

  <div
    *ngIf="!isFinished"
    fxLayout="column"
    fxLayoutAlign="space-between stretch"
    class="options-wrapper"
  >
    <div
      class="group-select-option"
      *ngFor="let option of availableStatus"
      (click)="markAttendance(option)"
      [ngClass]="
        currentAttendance.status.id === option.id
          ? option.style
          : ''
      "
    >
      <fa-icon
        *ngIf="currentAttendance.status.id === option.id"
        icon="check"
      ></fa-icon>
      {{ option.label }}
    </div>
  </div>
</div>

<!-- Completion Page -->
<div *ngIf="isFinished">
  <div class="roll-call-complete" [@completeRollCall]>
    <fa-icon icon="check-circle" class="roll-call-complete-icon"></fa-icon>
    <div
      i18n="
        Attendance completed|shows when the user has registered the attendance of
        all children
      "
      (click)="finish()"
    >
      Attendance completed.
    </div>

    <button
      (click)="showDetails()"
      class="finished-screen-button"
      mat-stroked-button
      i18n="Open details of recorded event for review"
    >
      Review Details
    </button>
  </div>

  <button
    (click)="finish()"
    class="finished-screen-button full-width"
    mat-stroked-button
    i18n="Back to overview button after finishing a roll call"
  >
    Back to Overview
  </button>
</div>
