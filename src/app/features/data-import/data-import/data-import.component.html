<div>
  <div *ngFor="let col of columnMapping">
    <mat-form-field>
      <mat-label>{{ col.column }}</mat-label>
      <app-basic-autocomplete
        [options]="allProps"
        [(ngModel)]="col.property"
        [optionToString]="labelMapper"
        [hideOption]="isUsed"
      />
    </mat-form-field>
    <button
      mat-button
      *ngIf="col.property?.mappingCmp"
      (click)="openMappingComponent(col)"
    >
      Map values
    </button>
  </div>
</div>
<div>
  <button mat-raised-button color="accent" (click)="testImport()">Test</button>
  <button mat-stroked-button (click)="clear()">Clear</button>
</div>

<!-- TODO allow editing without saving -->
<app-entity-subrecord
  *ngIf="mappedEntities.length > 0"
  [columns]="columns"
  [records]="mappedEntities"
  clickMode="none"
  [editable]="false"
/>

<div *ngIf="mappedEntities.length > 0">
  <button mat-raised-button color="accent" (click)="saveData()">Import data</button>
</div>
