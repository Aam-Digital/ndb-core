<mat-dialog-content>
  <form>
    <div class="merge-grid">
      <div class="header" i18n>Labels</div>
      <div class="header" i18n>Record A</div>
      <div class="header" i18n>Record B</div>
      <div class="header" i18n>Merge Preview</div>

      <ng-container *ngFor="let field of fieldsToMerge; trackBy: trackByFn">
        <div class="label-cell">
          <strong>{{ field.label }}</strong>
        </div>

        <div class="record-cell">
          <mat-radio-group>
            <mat-radio-button
              [value]="entitiesToMerge[0][field.id]"
              (click)="selectMergeValue(field.id, 0)"
              [checked]="isSelected(field.id, 0)"
            >
              <app-entity-field-view
                [field]="field"
                [entity]="entitiesToMerge[0]"
              ></app-entity-field-view>
            </mat-radio-button>
          </mat-radio-group>
        </div>

        <div class="record-cell">
          <mat-radio-group>
            <mat-radio-button
              [value]="entitiesToMerge[1][field.id]"
              (click)="selectMergeValue(field.id, 1)"
              [checked]="isSelected(field.id, 1)"
            >
              <app-entity-field-view
                [field]="field"
                [entity]="entitiesToMerge[1]"
              ></app-entity-field-view>
            </mat-radio-button>
          </mat-radio-group>
        </div>

        <!-- Merge Preview -->
        <div class="preview-cell">
          <app-entity-field-edit
            [field]="field"
            [entity]="mergedEntity"
            [form]="mergeForm"
            [compactMode]="true"
          >
          </app-entity-field-edit>
        </div>
      </ng-container>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions>
  <button mat-raised-button (click)="cancelMerge()" i18n>Cancel</button>
  <button mat-raised-button color="accent" (click)="confirmMerge()" i18n>
    Merge
  </button>
</mat-dialog-actions>
