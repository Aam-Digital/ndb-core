<app-view-title i18n>Edit Matching View</app-view-title>

<app-view-actions>
  <div class="flex-row gap-small">
    <button mat-raised-button color="accent" (click)="save()" i18n>Save</button>
    <button mat-stroked-button (click)="cancel()" i18n>Cancel</button>
  </div>
</app-view-actions>

<div class="entity-config-container padding-regular">
  <p i18n>
    Configure the details for each "side" of the matching. A side represents one
    of the two entity types that will be matched.
  </p>

  <div class="flex-wrap flex-row gap-small">
    <app-edit-matching-entity-side
      class="entity-side"
      [form]="configForm"
      controlName="leftType"
      [sideConfig]="sides.left"
      (configChange)="updateLeftSideConfig($event)"
    ></app-edit-matching-entity-side>

    <app-edit-matching-entity-side
      class="entity-side"
      [form]="configForm"
      controlName="rightType"
      [sideConfig]="sides.right"
      (configChange)="updateRightSideConfig($event)"
    ></app-edit-matching-entity-side>
  </div>
</div>

<div class="padding-top-regular">
  <app-edit-matching-view
    [value]="originalConfig.onMatch"
    [leftSideEntity]="entityRegistry.get(configForm.value.leftType)"
    [rightSideEntity]="entityRegistry.get(configForm.value.rightType)"
    (valueChange)="originalConfig.onMatch = $event"
  ></app-edit-matching-view>
</div>
